
//: Declare String Begin

/*: "init(coder:) has not been implemented" :*/
fileprivate let const_arrayWithData:[UInt8] = [0xb7,0xbc,0xb7,0xc2,0x76,0xb1,0xbd,0xb2,0xb3,0xc0,0x88,0x77,0x6e,0xb6,0xaf,0xc1,0x6e,0xbc,0xbd,0xc2,0x6e,0xb0,0xb3,0xb3,0xbc,0x6e,0xb7,0xbb,0xbe,0xba,0xb3,0xbb,0xb3,0xbc,0xc2,0xb3,0xb2]

fileprivate func equalLoad(filter num: UInt8) -> UInt8 {
    let value = Int(num) - 78
    if value < 0 {
        return UInt8(value + 256)
    } else {
        return UInt8(value)
    }
}

/*: "Tips" :*/
fileprivate let notiMakeData:String = "Tipstrue collection or text voice"

/*: "Your post may be recommended as hashtag topic to other users. And its content must comply with current laws regulations and platform requirements which shall not contain:" :*/
fileprivate let k_lengthName:[UInt8] = [0xd0,0xe6,0xec,0xe9,0x97,0xe7,0xe6,0xea,0xeb,0x97,0xe4,0xd8,0xf0,0x97,0xd9,0xdc,0x97,0xe9,0xdc,0xda,0xe6,0xe4,0xe4,0xdc,0xe5,0xdb,0xdc,0xdb,0x97,0xd8,0xea,0x97,0xdf,0xd8,0xea,0xdf,0xeb,0xd8,0xde,0x97,0xeb,0xe6,0xe7,0xe0,0xda,0x97,0xeb,0xe6,0x97,0xe6,0xeb,0xdf,0xdc,0xe9,0x97,0xec,0xea,0xdc,0xe9,0xea,0xa5,0x97,0xb8,0xe5,0xdb,0x97,0xe0,0xeb,0xea,0x97,0xda,0xe6,0xe5,0xeb,0xdc,0xe5,0xeb,0x97,0xe4,0xec,0xea,0xeb,0x97,0xda,0xe6,0xe4,0xe7,0xe3,0xf0,0x97,0xee,0xe0,0xeb,0xdf,0x97,0xda,0xec,0xe9,0xe9,0xdc,0xe5,0xeb,0x97,0xe3,0xd8,0xee,0xea,0x97,0xe9,0xdc,0xde,0xec,0xe3,0xd8,0xeb,0xe0,0xe6,0xe5,0xea,0x97,0xd8,0xe5,0xdb,0x97,0xe7,0xe3,0xd8,0xeb,0xdd,0xe6,0xe9,0xe4,0x97,0xe9,0xdc,0xe8,0xec,0xe0,0xe9,0xdc,0xe4,0xdc,0xe5,0xeb,0xea,0x97,0xee,0xdf,0xe0,0xda,0xdf,0x97,0xea,0xdf,0xd8,0xe3,0xe3,0x97,0xe5,0xe6,0xeb,0x97,0xda,0xe6,0xe5,0xeb,0xd8,0xe0,0xe5,0xb1]

fileprivate func selfMidCount(direction num: UInt8) -> UInt8 {
    let value = Int(num) - 119
    if value < 0 {
        return UInt8(value + 256)
    } else {
        return UInt8(value)
    }
}

/*: "#777777" :*/
fileprivate let showViewSizeTitle:String = "#giftgiftgiftgift"
fileprivate let user_showValue:String = "77"

/*: "1. Hate comments or rumors. \n2. Induce others to send gifts. \n3. Induce others to pay and trade on money. \n4. Nudity or sexual activity. \n5. Advertising information. \n6. Other contents prohibited by laws and administrative regulations." :*/
fileprivate let kMakeContent:[UInt8] = [0x73,0x70,0x62,0x8a,0xa3,0xb6,0xa7,0x62,0xa5,0xb1,0xaf,0xaf,0xa7,0xb0,0xb6,0xb5,0x62,0xb1,0xb4,0x62,0xb4,0xb7,0xaf,0xb1,0xb4,0xb5,0x70,0x62,0x4c,0x74,0x70,0x62,0x8b,0xb0,0xa6,0xb7,0xa5,0xa7,0x62,0xb1,0xb6,0xaa,0xa7,0xb4,0xb5,0x62,0xb6,0xb1,0x62,0xb5,0xa7,0xb0,0xa6,0x62,0xa9,0xab,0xa8,0xb6,0xb5,0x70,0x62,0x4c,0x75,0x70,0x62,0x8b,0xb0,0xa6,0xb7,0xa5,0xa7,0x62,0xb1,0xb6,0xaa,0xa7,0xb4,0xb5,0x62,0xb6,0xb1,0x62,0xb2,0xa3,0xbb,0x62,0xa3,0xb0,0xa6,0x62,0xb6,0xb4,0xa3,0xa6,0xa7,0x62,0xb1,0xb0,0x62,0xaf,0xb1,0xb0,0xa7,0xbb,0x70,0x62,0x4c,0x76,0x70,0x62,0x90,0xb7,0xa6,0xab,0xb6,0xbb,0x62,0xb1,0xb4,0x62,0xb5,0xa7,0xba,0xb7,0xa3,0xae,0x62,0xa3,0xa5,0xb6,0xab,0xb8,0xab,0xb6,0xbb,0x70,0x62,0x4c,0x77,0x70,0x62,0x83,0xa6,0xb8,0xa7,0xb4,0xb6,0xab,0xb5,0xab,0xb0,0xa9,0x62,0xab,0xb0,0xa8,0xb1,0xb4,0xaf,0xa3,0xb6,0xab,0xb1,0xb0,0x70,0x62,0x4c,0x78,0x70,0x62,0x91,0xb6,0xaa,0xa7,0xb4,0x62,0xa5,0xb1,0xb0,0xb6,0xa7,0xb0,0xb6,0xb5,0x62,0xb2,0xb4,0xb1,0xaa,0xab,0xa4,0xab,0xb6,0xa7,0xa6,0x62,0xa4,0xbb,0x62,0xae,0xa3,0xb9,0xb5,0x62,0xa3,0xb0,0xa6,0x62,0xa3,0xa6,0xaf,0xab,0xb0,0xab,0xb5,0xb6,0xb4,0xa3,0xb6,0xab,0xb8,0xa7,0x62,0xb4,0xa7,0xa9,0xb7,0xae,0xa3,0xb6,0xab,0xb1,0xb0,0xb5,0x70]

fileprivate func quantitativeRelation(by num: UInt8) -> UInt8 {
    let value = Int(num) - 66
    if value < 0 {
        return UInt8(value + 256)
    } else {
        return UInt8(value)
    }
}

/*: "OK" :*/
fileprivate let kContentText:String = "Ojump"

//: Declare String End

// __DEBUG__
// __CLOSE_PRINT__
//
//  ParadigmReactiveCompatible.swift
//  AbroadTalking
//
//  Created by young on 2022/9/21.
//

//: import UIKit
import UIKit

//: class TalkingFreeTipsView: UIView {
class ParadigmReactiveCompatible: UIView {
    //: let disposeBag = DisposeBag()
    let disposeBag = DisposeBag()

    //: required init?(coder: NSCoder) {
    required init?(coder _: NSCoder) {
        //: fatalError("init(coder:) has not been implemented")
        fatalError(String(bytes: const_arrayWithData.map{equalLoad(filter: $0)}, encoding: .utf8)!)
    }

    //: override init(frame: CGRect) {
    override init(frame: CGRect) {
        //: super.init(frame: frame)
        super.init(frame: frame)
        //: setupSubviews()
        query()
        //: setupSubViewsConstraint()
        confinementViewsDetailTotalerchange()
    }

    // MARK: - Lazy load

    //: private lazy var whiteBgV: UIView = {
    private lazy var whiteBgV: UIView = {
        //: let v = UIView()
        let v = UIView()
        //: v.backgroundColor = .white
        v.backgroundColor = .white
        //: v.layer.cornerRadius = 15
        v.layer.cornerRadius = 15
        //: v.layer.masksToBounds = true
        v.layer.masksToBounds = true
        //: return v
        return v
        //: }()
    }()

    //: private lazy var titleLab: UILabel = {
    private lazy var titleLab: UILabel = {
        //: let lab = UILabel()
        let lab = UILabel()
        //: lab.textColor = UIColor.appTitleColor()
        lab.textColor = UIColor.collectionFor()
        //: lab.font = UIFont.pingfangFont(type: .Semibold, fontSize: 22)
        lab.font = UIFont.handleFont(type: .Semibold, fontSize: 22)
        //: lab.text = "Tips".localized
        lab.text = (String(notiMakeData.prefix(4))).localized
        //: return lab
        return lab
        //: }()
    }()

    //: private lazy var scrollView: UIScrollView = {
    private lazy var scrollView: UIScrollView = {
        //: let scrollV = UIScrollView()
        let scrollV = UIScrollView()
        //: scrollV.backgroundColor = .white
        scrollV.backgroundColor = .white
        //: scrollV.showsVerticalScrollIndicator = true
        scrollV.showsVerticalScrollIndicator = true
        //: scrollV.showsHorizontalScrollIndicator = false
        scrollV.showsHorizontalScrollIndicator = false
        //: return scrollV
        return scrollV
        //: }()
    }()

    //: private lazy var textLab1: UILabel = {
    private lazy var textLab1: UILabel = {
        //: let lab = UILabel()
        let lab = UILabel()
        //: lab.textColor = UIColor.appTitleColor()
        lab.textColor = UIColor.collectionFor()
        //: lab.font = UIFont.pingfangFont(type: .Medium, fontSize: 16)
        lab.font = UIFont.handleFont(type: .Medium, fontSize: 16)
        //: lab.numberOfLines = 0
        lab.numberOfLines = 0
        //: lab.text = "Your post may be recommended as hashtag topic to other users. And its content must comply with current laws regulations and platform requirements which shall not contain:".localized
        lab.text = String(bytes: k_lengthName.map{selfMidCount(direction: $0)}, encoding: .utf8)!.localized
        //: return lab
        return lab
        //: }()
    }()

    //: private lazy var textLab2: UILabel = {
    private lazy var textLab2: UILabel = {
        //: let lab = UILabel()
        let lab = UILabel()
        //: lab.textColor = UIColor(hex: "#777777")
        lab.textColor = UIColor(hex: (showViewSizeTitle.replacingOccurrences(of: "gift", with: "7") + user_showValue.capitalized))
        //: lab.font = UIFont.pingfangFont(type: .Regular, fontSize: 16)
        lab.font = UIFont.handleFont(type: .Regular, fontSize: 16)
        //: lab.numberOfLines = 0
        lab.numberOfLines = 0
        //: lab.text = "1. Hate comments or rumors. \n2. Induce others to send gifts. \n3. Induce others to pay and trade on money. \n4. Nudity or sexual activity. \n5. Advertising information. \n6. Other contents prohibited by laws and administrative regulations.".localized
        lab.text = String(bytes: kMakeContent.map{quantitativeRelation(by: $0)}, encoding: .utf8)!.localized
        //: return lab
        return lab
        //: }()
    }()

    //: private lazy var okBtn: UIButton = {
    private lazy var okBtn: UIButton = {
        //: let btn = UIButton()
        let btn = UIButton()
        //: btn.setTitle("OK".localized, for: .normal)
        btn.setTitle("OK".localized, for: .normal)
        //: btn.setTitleColor(.white, for: .normal)
        btn.setTitleColor(.white, for: .normal)
        //: btn.titleLabel?.font = UIFont.pingfangFont(type: .Medium, fontSize: 18)
        btn.titleLabel?.font = UIFont.handleFont(type: .Medium, fontSize: 18)
        //: btn.setBackgroundImage(UIImage.imageGradientColor(colors: UIColor.appGradientColor(), size: CGSize(width: 255, height: 50)), for: .normal)
        btn.setBackgroundImage(UIImage.colored(colors: UIColor.tableColor(), size: CGSize(width: 255, height: 50)), for: .normal)
        //: btn.layer.cornerRadius = 25
        btn.layer.cornerRadius = 25
        //: btn.clipsToBounds = true
        btn.clipsToBounds = true
        //: return btn
        return btn
        //: }()
    }()
}

// MARK: - Event

//: extension TalkingFreeTipsView {
extension ParadigmReactiveCompatible {
    //: func showView(okHandler: @escaping () -> Void) {
    func veryWellNext(okHandler: @escaping () -> Void) {
        //: show()
        network()
        // bind event
        //: okBtn.rx.controlEvent(.touchUpInside)
        okBtn.rx.controlEvent(.touchUpInside)
            //: .subscribe(onNext: { [weak self] in
            .subscribe(onNext: { [weak self] in
                //: guard let self = self else { return }
                guard let self = self else { return }
                // 记录同意状态
                //: Defaults.set(true, forKey: TalkingFreeTipsViewIsShow)
                app_seatPath.set(true, forKey: kToPath)
                //: self.dismiss()
                self.toFromDataDismiss()
                //: okHandler()
                okHandler()
                //: })
            })
            //: .disposed(by: disposeBag)
            .disposed(by: disposeBag)
    }

    //: private func show() {
    private func network() {
        //: UIView.animate(withDuration: 0.3) {
        UIView.animate(withDuration: 0.3) {
            //: self.alpha = 1
            self.alpha = 1
            //: } completion: { finish in
        } completion: { _ in
            //: TopReactiveCompatible.getWindow().addSubview(self)
            TopReactiveCompatible.sovietSocialistRepublic().addSubview(self)
        }
    }

    //: private func dismiss() {
    private func toFromDataDismiss() {
        //: UIView.animate(withDuration: 0.3) {
        UIView.animate(withDuration: 0.3) {
            //: self.alpha = 0
            self.alpha = 0
            //: } completion: { finish in
        } completion: { _ in
            //: guard self.superview != nil else { return }
            guard self.superview != nil else { return }
            //: self.removeFromSuperview()
            self.removeFromSuperview()
        }
    }
}

// MARK: - Layout

//: extension TalkingFreeTipsView {
extension ParadigmReactiveCompatible {
    // 添加视图
    //: private func setupSubviews() {
    private func query() {
        //: frame = CGRect(x: 0, y: 0, width: ScreenWidth, height: ScreenHeight)
        frame = CGRect(x: 0, y: 0, width: main_clickBottomContent, height: data_senseEndMessage)
        //: backgroundColor = UIColor.RGBA(0, 0, 0, 0.6)
        backgroundColor = UIColor.moveRgba(0, 0, 0, 0.6)
        //: alpha = 0
        alpha = 0
        //: addSubview(whiteBgV)
        addSubview(whiteBgV)
        //: whiteBgV.addSubview(titleLab)
        whiteBgV.addSubview(titleLab)
        //: whiteBgV.addSubview(scrollView)
        whiteBgV.addSubview(scrollView)
        //: scrollView.addSubview(textLab1)
        scrollView.addSubview(textLab1)
        //: scrollView.addSubview(textLab2)
        scrollView.addSubview(textLab2)
        //: whiteBgV.addSubview(okBtn)
        whiteBgV.addSubview(okBtn)
    }

    // 添加约束
    //: private func setupSubViewsConstraint() {
    private func confinementViewsDetailTotalerchange() {
        //: whiteBgV.snp.makeConstraints { make in
        whiteBgV.snp.makeConstraints { make in
            //: make.center.equalToSuperview()
            make.center.equalToSuperview()
            //: make.size.equalTo(CGSize(width: 295, height: 374))
            make.size.equalTo(CGSize(width: 295, height: 374))
        }
        //: titleLab.snp.makeConstraints { make in
        titleLab.snp.makeConstraints { make in
            //: make.centerX.equalToSuperview()
            make.centerX.equalToSuperview()
            //: make.top.equalToSuperview().offset(20)
            make.top.equalToSuperview().offset(20)
        }
        //: scrollView.snp.makeConstraints { make in
        scrollView.snp.makeConstraints { make in
            //: make.top.equalTo(titleLab.snp.bottom).offset(10)
            make.top.equalTo(titleLab.snp.bottom).offset(10)
            //: make.leading.equalTo(20)
            make.leading.equalTo(20)
            //: make.trailing.equalTo(-20)
            make.trailing.equalTo(-20)
            //: make.bottom.equalToSuperview().offset(-82)
            make.bottom.equalToSuperview().offset(-82)
        }
        //: textLab1.snp.makeConstraints { make in
        textLab1.snp.makeConstraints { make in
            //: make.top.equalToSuperview()
            make.top.equalToSuperview()
            //: make.leading.equalTo(whiteBgV.snp.leading).offset(20)
            make.leading.equalTo(whiteBgV.snp.leading).offset(20)
            //: make.trailing.equalTo(whiteBgV.snp.trailing).offset(-20)
            make.trailing.equalTo(whiteBgV.snp.trailing).offset(-20)
        }
        //: textLab2.snp.makeConstraints { make in
        textLab2.snp.makeConstraints { make in
            //: make.top.equalTo(textLab1.snp.bottom).offset(4)
            make.top.equalTo(textLab1.snp.bottom).offset(4)
            //: make.leading.width.equalTo(textLab1)
            make.leading.width.equalTo(textLab1)
        }
        //: okBtn.snp.makeConstraints { make in
        okBtn.snp.makeConstraints { make in
            //: make.bottom.equalToSuperview().offset(-16)
            make.bottom.equalToSuperview().offset(-16)
            //: make.centerX.equalToSuperview()
            make.centerX.equalToSuperview()
            //: make.size.equalTo(CGSize(width: 255, height: 50))
            make.size.equalTo(CGSize(width: 255, height: 50))
        }
    }
}
