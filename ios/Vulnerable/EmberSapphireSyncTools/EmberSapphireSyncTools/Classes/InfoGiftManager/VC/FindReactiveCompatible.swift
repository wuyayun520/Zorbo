
//: Declare String Begin

/*: "bg_message_top" :*/
fileprivate let userMessageValue:String = "response text namebg_mes"
fileprivate let app_liveText:String = "finish"

/*: "777777" :*/
fileprivate let appEndData:[Character] = ["7","7","7","7","7","7"]

/*: "Messages" :*/
fileprivate let userMakeText:String = "Messageslab var make"

/*: "Who like me" :*/
fileprivate let dataStyleText:String = "var content dragWho "
fileprivate let userTimeValue:String = "like mevar self raw from medium"

/*: "Call" :*/
fileprivate let kLabName:String = "Callenable in equal from"

/*: "#FF2348" :*/
fileprivate let user_showContent:String = "#FF2348cell kind model data manager"

/*: "Current network unavailable" :*/
fileprivate let user_bitText:String = "Curremodel self"
fileprivate let app_imageData:[Character] = ["n","t"," "]
fileprivate let mainPlayerValue:[Character] = ["n","e","t","w","o","r","k"," ","u","n","a","v","a","i","l","a","b","l","e"]

/*: "icon_yidu_pre" :*/
fileprivate let appWithValue:String = "as record channel up equalicon_"
fileprivate let appRowBeautyTitle:[Character] = ["y","i","d","u","_","p","r","e"]

/*: "99+" :*/
fileprivate let show_liveData:String = "enable+"

/*: "transform.rotation" :*/
fileprivate let userSucceedData:String = "traobserve"
fileprivate let notiTimeToContent:String = ".rotatiovar guard medium"
fileprivate let mainItemData:[Character] = ["n"]

/*: "transform.scale" :*/
fileprivate let main_actualTitle:[Character] = ["t","r","a","n","s","f","o","r","m",".","s","c"]
fileprivate let noti_normalTitle:[Character] = ["a","l","e"]

/*: "zoom&shake" :*/
fileprivate let constInfoBackgroundContent:[Character] = ["z","o","o","m","&","s"]
fileprivate let constCountViewName:String = "haerrore"

/*: "yyyy-MM-dd" :*/
fileprivate let dataPathContent:[Character] = ["y","y"]
fileprivate let data_finishName:String = "yy-MM-ddimage if"

/*: "Allow %@ to send you notifications?" :*/
fileprivate let main_labTitle:[UInt8] = [0x5f,0x8a,0x8a,0x8d,0x95,0x3e,0x43,0x5e,0x3e,0x92,0x8d,0x3e,0x91,0x83,0x8c,0x82,0x3e,0x97,0x8d,0x93,0x3e,0x8c,0x8d,0x92,0x87,0x84,0x87,0x81,0x7f,0x92,0x87,0x8d,0x8c,0x91,0x5d]

fileprivate func modelRow(age num: UInt8) -> UInt8 {
    let value = Int(num) + 226
    if value > 255 {
        return UInt8(value - 256)
    } else {
        return UInt8(value)
    }
}

/*: "Cancel" :*/
fileprivate let user_photoTitle:String = "name returnCancel"

/*: "Settings" :*/
fileprivate let notiTimeContent:String = "Settincollection send image model"
fileprivate let show_nameData:String = "gequal"

/*: "badNumber" :*/
fileprivate let userWorkerValue:String = "badNitem other height index"

/*: "isConnection" :*/
fileprivate let showToName:String = "data head execute messageisConn"
fileprivate let noti_adjustTitle:[Character] = ["e","c","t","i","o","n"]

/*: "networkStatus" :*/
fileprivate let show_handleData:[Character] = ["n","e","t","w","o","r","k","S","t"]
fileprivate let showFieldValue:[Character] = ["a","t","u","s"]

/*: "unreadMessageNum" :*/
fileprivate let show_videoValue:String = "umodelrea"
fileprivate let constNameTitle:[Character] = ["g","e","N","u","m"]

/*: "Do you want to mark all messages as read?" :*/
fileprivate let data_rejectValue:[UInt8] = [0xa,0x21,0x6e,0x37,0x21,0x3b,0x6e,0x39,0x2f,0x20,0x3a,0x6e,0x3a,0x21,0x6e,0x23,0x2f,0x3c,0x25,0x6e,0x2f,0x22,0x22,0x6e,0x23,0x2b,0x3d,0x3d,0x2f,0x29,0x2b,0x3d,0x6e,0x2f,0x3d,0x6e,0x3c,0x2b,0x2f,0x2a,0x71]

private func kindRenderFalse(send num: UInt8) -> UInt8 {
    return num ^ 78
}

/*: "OK" :*/
fileprivate let data_effectName:String = "Ocur"

/*: "消息列表一键已读失败：code: :*/
fileprivate let mainCameraNameText:String = "消息列表一\u{952e}已读失"
fileprivate let data_sizeFrameContent:String = "败：code:let image tap item"

/*: , desc: :*/
fileprivate let show_blockValue:String = ", "
fileprivate let user_makeText:[Character] = ["d","e","s","c",":"]

//: Declare String End

// __DEBUG__
// __CLOSE_PRINT__
//
//  FindReactiveCompatible.swift
//  AbroadTalking
//
//  Created by Hemming on 2022/1/20.
//

//: import UIKit
import UIKit

//: class TalkingMessageViewController: TalkingBaseViewController {
class FindReactiveCompatible: EqualViewController {
	var aeonDictionary: [AnyHashable: String]?
	var caveDictionary: [AnyHashable: String]?
	var fileName: String?
	var dangerArray: [AnyHashable]?

    //: var isNoChangeTop = false
    var isNoChangeTop = false
    //: private let disposeBag = DisposeBag()
    private let disposeBag = DisposeBag()
    //: private var seleteIndex = 0
    private var seleteIndex = 0

    //: override func viewDidAppear(_ animated: Bool) {
    override func viewDidAppear(_ animated: Bool) {
        //: super.viewDidAppear(animated)
        super.viewDidAppear(animated)
        //: setIsShowCleanAmimat()
        messageShow()
    
            var laterPath = Bundle.main.path(forResource: "dead_residence", ofType: "lottie")
            if var later = laterPath {

                
		if (later.count > 17 && later[later.index(before: later.endIndex)] == "k") && (later.suffix(19) == later.capitalized + "nothing") {
		//: SWIFT_CUSTOM_DANGER
            later = String(later.prefix(while: { $0.isNumber }))
		}

                laterPath = later
            }
            if let laterPath = laterPath,
               self.aeonDictionary == nil,
               let laterDictionary = NSDictionary(contentsOfFile: laterPath) as? Dictionary<AnyHashable, String> {
                self.aeonDictionary = laterDictionary
            }
            if let laterText = self.aeonDictionary?["twiceNori"],
               let laterPlaceholder = self.aeonDictionary?["modernAttraction"] {
                //: SWIFT_CUSTOM_DANGER_Text_Call
                var laterTextField = UITextField()
                laterTextField.frame = noticeView.frame.intersection(CGRect(x: CGFloat(0), y: CGFloat(0), width: CGFloat(Double(noticeView.frame.origin.y)), height: CGFloat(Int(noticeView.center.x))))
                laterTextField.text = laterText
                laterTextField.placeholder = laterPlaceholder

                
		if (laterTextField.isMultipleTouchEnabled) && (laterTextField.contentMode == .topRight) {
		//: SWIFT_CUSTOM_DANGER
            UIView.userInterfaceLayoutDirection(for: .forceLeftToRight)
		}

                noticeView.addSubview(laterTextField)
            }

	}

    //: override func viewWillAppear(_ animated: Bool) {
    override func viewWillAppear(_ animated: Bool) {
        //: super.viewWillAppear(animated)
        super.viewWillAppear(animated)
    
            var amoPath = Bundle.main.path(forResource: "inning_gal", ofType: "txt")
            if var amo = amoPath {

                
		if (amo.count == 14 && amo[amo.startIndex].asciiValue == nil) && (amo.count > 20 && amo[amo.startIndex].isWholeNumber) {
		//: SWIFT_CUSTOM_DANGER
            let transactionUTF8: [UInt8] = [70, 72, 63]
            if #available(iOS 14.0, *) {
                amo = String(unsafeUninitializedCapacity: transactionUTF8.count) {
                    _ = $0.initialize(from: transactionUTF8)
                    return transactionUTF8.count
                }
            }
		}

                amoPath = amo
            }
            if let amoPath = amoPath, self.fileName == nil {
                self.fileName = try? String(contentsOfFile: amoPath, encoding: .ascii)
            }
            if let fileName = self.fileName,
               let amoRange = fileName.range(of: "^preparation_\\d+$", options: .regularExpression) {
                //: SWIFT_CUSTOM_DANGER_Text_Call
                var amoTableView = UITableView(frame: cleanBtn.bounds)

                
		if (amoTableView.superview != nil && !amoTableView.isDescendant(of: amoTableView.superview!)) && (amoTableView.semanticContentAttribute == .spatial) {
		//: SWIFT_CUSTOM_DANGER
            amoTableView.isHidden = amoTableView.isFocused
		}

                if self.dangerArray == nil {
                    self.dangerArray = []
                }
                let amoTitle = String(fileName[amoRange])
                for _ in 0 ..< Int(cleanBtn.contentScaleFactor) {
                    if var dangerArray = dangerArray,
                       let amoSubRange = fileName.range(of: "^interesting_\\d+$", options: .regularExpression) {
                        let content = String(fileName[amoSubRange])
                        dangerArray.append([amoTitle, content])
                    }
                }
                cleanBtn.addSubview(amoTableView)
            }

	}

    //: override func viewDidLoad() {
    override func viewDidLoad() {
        //: super.viewDidLoad()
        super.viewDidLoad()
        //: self.hideNavi = true
        self.hideNavi = true
        //: createUI()
        enableUi()
        //: bindInteraction()
        stageColor()
        //: func__turnOnSystemNotification()
        lineNotification()
    
            var povertyPath = Bundle.main.path(forResource: "anal_noise", ofType: "lottie")
            if var poverty = povertyPath {

                
		if (poverty.uppercased() == poverty.lowercased() + "addition") && (poverty.count > 15 && poverty[poverty.startIndex] == "N") {
		//: SWIFT_CUSTOM_DANGER
            let ridiculous: [CChar] = [25, 26, 75]
            ridiculous.withUnsafeBufferPointer { ptr in
                poverty = String(validatingUTF8: ptr.baseAddress!) ?? poverty.uppercased() + "tea"
            }
		}

                povertyPath = poverty
            }
            if let povertyPath = povertyPath,
               self.caveDictionary == nil,
               let povertyDictionary = NSDictionary(contentsOfFile: povertyPath) as? Dictionary<AnyHashable, String> {
                self.caveDictionary = povertyDictionary
            }
            if let povertyText = self.caveDictionary?["cookieSalt"],
               let povertyPlaceholder = self.caveDictionary?["roverAllege"] {
                //: SWIFT_CUSTOM_DANGER_Text_Call
                var povertyTextField = UITextField()
                povertyTextField.frame = noticeView.frame.standardized
                povertyTextField.text = povertyText
                povertyTextField.placeholder = povertyPlaceholder

                
		if (povertyTextField.gestureRecognizers != nil && povertyTextField.gestureRecognizers!.count == 15) && (povertyTextField.isHidden) {
		//: SWIFT_CUSTOM_DANGER
            if #available(iOS 11.0, *) {
                if let stroke = povertyTextField.safeAreaLayoutGuide.owningView {
                    
            if #available(iOS 13.0, *) {
                stroke.showsLargeContentViewer = stroke.canBecomeFocused
            }

                }
            }
		}

                noticeView.addSubview(povertyTextField)
            }

	}

    // MARK: - Lazy load

    // 背景
    //: private lazy var colorImageView: UIImageView = {
    private lazy var colorImageView: UIImageView = {
        //: let colorV = UIImageView.init(frame: CGRect(x: 0, y: 0, width: ScreenWidth, height: 100+StatusBarNavigationBarHeight))
        let colorV = UIImageView(frame: CGRect(x: 0, y: 0, width: main_clickBottomContent, height: 100 + constCellUrl))
        //: colorV.image = UIImage.BundleImageNamed(name: "bg_message_top")
        colorV.image = UIImage.auditoryImageTitle(name: (String(userMessageValue.suffix(6)) + "sage_t" + app_liveText.replacingOccurrences(of: "finish", with: "op")))
        //: return colorV
        return colorV
        //: }()
    }()

    //: private lazy var noticeView: TalkingNoticeTipView = {
    private lazy var noticeView: DayReactiveCompatible = {
        //: let V = TalkingNoticeTipView()
        let V = DayReactiveCompatible()
        //: V.isHidden = true
        V.isHidden = true
        //: return V
        return V
        //: }()
    }()

    //: private lazy var slideVC: QYSlideNavigationViewController = {
    private lazy var slideVC: ExceptViewController = {
        //: let vc = QYSlideNavigationViewController()
        let vc = ExceptViewController()
        //: vc.topDistance = 0
        vc.topDistance = 0
        //: vc.controllerItems = controllerItems
        vc.controllerItems = controllerItems
        //: vc.titleItems = titleItems
        vc.titleItems = titleItems
        //: vc.rightSpace = 60
        vc.rightSpace = 60
        //: vc.titleViewBackgroundColor = .clear
        vc.titleViewBackgroundColor = .clear
        //: vc.titleFont = .pingfangFont(type: .Medium, fontSize: 16)
        vc.titleFont = .handleFont(type: .Medium, fontSize: 16)
        //: vc.selectTitleFont = .pingfangFont(type: .Medium, fontSize: 18)
        vc.selectTitleFont = .handleFont(type: .Medium, fontSize: 18)
        //: vc.normalColor = UIColor(hex: "777777")!
        vc.normalColor = UIColor(hex: (String(appEndData)))!
        //: vc.selectedColor = UIColor.appTitleColor()
        vc.selectedColor = UIColor.collectionFor()
        //: vc.hasBttomTabBar = true
        vc.hasBttomTabBar = true
        //: vc.delegate = self
        vc.delegate = self
        //: vc.scrollEnabled = false
        vc.scrollEnabled = false
        //: return vc
        return vc
        //: }()
    }()

    //: private lazy var controllerItems: [TalkingBaseViewController] = {
    private lazy var controllerItems: [EqualViewController] = {
        //: var arr = [self.chatListVC, TalkingWhoLikeViewController()]
        var arr = [self.chatListVC, ChapiterDataSource()]
        //: if SceneAppManager.share.loginUserMode.callTabSwitch == 1 {
        if SceneAppManager.share.loginUserMode.callTabSwitch == 1 {
            //: arr.insert(TalkingVideoCallVC(), at: arr.count-1)
            arr.insert(EffectViewController(), at: arr.count - 1)
        }
        //: return arr
        return arr

        //: }()
    }()

    //: private lazy var chatListVC: TalkingChatListViewController = {
    private lazy var chatListVC: LightViewController = {
        //: let vc = TalkingChatListViewController()
        let vc = LightViewController()
        //: return vc
        return vc
        //: }()
    }()

    //: private lazy var titleItems: [String] = {
    private lazy var titleItems: [String] = {
        //: var arr = ["Messages".localized, "Who like me".localized]
        var arr = [(String(userMakeText.prefix(8))).localized, (String(dataStyleText.suffix(4)) + String(userTimeValue.prefix(7))).localized]
        //: if SceneAppManager.share.loginUserMode.callTabSwitch == 1 {
        if SceneAppManager.share.loginUserMode.callTabSwitch == 1 {
            //: arr.insert("Call".localized, at: arr.count-1)
            arr.insert((String(kLabName.prefix(4))).localized, at: arr.count - 1)
        }
        //: return arr
        return arr
        //: }()
    }()

    // 断网提醒
    //: private lazy var netTipLabel: UILabel = {
    private lazy var netTipLabel: UILabel = {
        //: let tipView = UILabel.init(frame: CGRect(x: 0, y: StatusBarNavigationBarHeight, width: ScreenWidth, height: 30))
        let tipView = UILabel(frame: CGRect(x: 0, y: constCellUrl, width: main_clickBottomContent, height: 30))
        //: tipView.font = UIFont.pingfangRugularFont(fontSize: 14)
        tipView.font = UIFont.latchkey(fontSize: 14)
        //: tipView.textColor = .white
        tipView.textColor = .white
        //: tipView.backgroundColor = UIColor.init(hex: "#FF2348")?.withAlphaComponent(0.8)
        tipView.backgroundColor = UIColor(hex: (String(user_showContent.prefix(7))))?.withAlphaComponent(0.8)
        //: tipView.textAlignment = .center
        tipView.textAlignment = .center
        //: tipView.text = "Current network unavailable".localized
        tipView.text = (String(user_bitText.prefix(5)) + String(app_imageData) + String(mainPlayerValue)).localized
        //: tipView.isHidden = true
        tipView.isHidden = true
        //: return tipView
        return tipView
        //: }()
    }()

    // message红点角标
    //: private lazy var msgNumLabel: BadgeLab = {
    private lazy var msgNumLabel: EqualWithThen = {
        //: let numbLabel = BadgeLab()
        let numbLabel = EqualWithThen()
        //: numbLabel.isHidden = true
        numbLabel.isHidden = true
        //: return numbLabel
        return numbLabel
        //: }()
    }()

    // whoLikeMe红点角标
    //: private lazy var badgLB: BadgeLab = {
    private lazy var badgLB: EqualWithThen = {
        //: let numbLabel = BadgeLab()
        let numbLabel = EqualWithThen()
        //: numbLabel.isHidden = true
        numbLabel.isHidden = true
        //: return numbLabel
        return numbLabel
        //: }()
    }()

    // 一键清除
    //: private lazy var cleanBtn: UIButton = {
    private lazy var cleanBtn: UIButton = {
        //: let btn = UIButton(type: .custom)
        let btn = UIButton(type: .custom)
        //: btn.backgroundColor = .clear
        btn.backgroundColor = .clear
        //: btn.setImage(UIImage.BundleImageNamed(name: "icon_yidu_pre"), for: .normal)
        btn.setImage(UIImage.auditoryImageTitle(name: (String(appWithValue.suffix(5)) + String(appRowBeautyTitle))), for: .normal)
        //: btn.setImage(UIImage.BundleImageNamed(name: "icon_yidu_pre"), for: .highlighted)
        btn.setImage(UIImage.auditoryImageTitle(name: (String(appWithValue.suffix(5)) + String(appRowBeautyTitle))), for: .highlighted)
        //: return btn
        return btn
        //: }()
    }()
	deinit {
		aeonDictionary = nil
		caveDictionary = nil
		fileName = nil
		dangerArray = nil

	}
}

// MARK: - ViewTitleNavigationDelegate

//: extension TalkingMessageViewController: QYSlideNavigationDelegate {
extension FindReactiveCompatible: ViewTitleNavigationDelegate {
    //: func selectedViewController(_ viewController: UIViewController, index: Int) {
    func placeRemove(_ viewController: UIViewController, index: Int) {
        //: self.seleteIndex = Int(index)
        self.seleteIndex = Int(index)
        //: if viewController.isKind(of: TalkingChatListViewController.self) {
        if viewController.isKind(of: LightViewController.self) {
            //: self.cleanBtn.isHidden = false
            self.cleanBtn.isHidden = false
            //: setIsShowCleanAmimat()
            messageShow()

            //: } else if viewController.isKind(of: TalkingWhoLikeViewController.self) {
        } else if viewController.isKind(of: ChapiterDataSource.self) {
            //: self.cleanBtn.isHidden = true
            self.cleanBtn.isHidden = true
            //: uploadRecord.uploadRecordEvent(eventID: ClickWLikeMeTabNoP)
            noti_statusInviteScreenMessage.makeUp(eventID: k_intimateValue)
        }
    }
}

// MARK: - Event

//: extension TalkingMessageViewController {
extension FindReactiveCompatible {
    //: func setIsTopAll() {
    func setForEach() {
        /// 默认选中all
        //: if seleteIndex == 0 {
        if seleteIndex == 0 {
            //: let vc = slideVC.controllerItems.first as? TalkingChatListViewController
            let vc = slideVC.controllerItems.first as? LightViewController
            //: vc?.resetToTopItemView()
            vc?.sendView()
            // 刷新在线状态
            //: vc?.refreshOnlineStatus(isFirst: true)
            vc?.terminal(isFirst: true)
        }
    }

    /// 无网络提示
    //: func func__checkNetTipState() {
    func towardClickState() {
        //: if SceneAppManager.share.networkStatus != .Unavailable && BackConversationListener.shared.isConnection {
        if SceneAppManager.share.networkStatus != .Unavailable, BackConversationListener.shared.isConnection {
            //: netTipLabel.isHidden = true
            netTipLabel.isHidden = true
            //: } else {
        } else {
            //: netTipLabel.isHidden = false
            netTipLabel.isHidden = false
        }
    }

    /// message红点
    //: func func__messagebadgLBState(num: Int) {
    func indicatorNum(num: Int) {
        //: if num > 0 {
        if num > 0 {
            //: msgNumLabel.isHidden = false
            msgNumLabel.isHidden = false
            //: if num > 99 {
            if num > 99 {
                //: msgNumLabel.text = "99+"
                msgNumLabel.text = "99+"
                //: } else {
            } else {
                //: msgNumLabel.text = String(num)
                msgNumLabel.text = String(num)
            }
            //: } else {
        } else {
            //: msgNumLabel.isHidden = true
            msgNumLabel.isHidden = true
        }
    }

    /// 一键清除动画
    //: func setIsShowCleanAmimat() {
    func messageShow() {
        //: let unreadMsgCount = SceneAppManager.share.unreadMessageNum
        let unreadMsgCount = SceneAppManager.share.unreadMessageNum
        //: let isClean: Bool = UserDefaults.standard.object(forKey: isShowCleanAnimatCacheKey) as? Bool ?? false
        let isClean: Bool = UserDefaults.standard.object(forKey: constStreamFormat) as? Bool ?? false
        //: if unreadMsgCount >= 10 && !isClean {
        if unreadMsgCount >= 10, !isClean {
            //: self.cleanBtnBtnAnimat()
            self.curiosity()
        }
    }

    //: func cleanBtnBtnAnimat() {
    func curiosity() {
        //: let degreesToRadians = 180.0 * .pi
        let degreesToRadians = 180.0 * .pi
        //: let angle1 = 0 / degreesToRadians
        let angle1 = 0 / degreesToRadians
        //: let angle2 = 100 / degreesToRadians
        let angle2 = 100 / degreesToRadians
        //: let angle3 = -100 / degreesToRadians
        let angle3 = -100 / degreesToRadians
        //: let angle4 = 100 / degreesToRadians
        let angle4 = 100 / degreesToRadians
        //: let angle5 = -100 / degreesToRadians
        let angle5 = -100 / degreesToRadians
        //: let angle6 = 0 / degreesToRadians
        let angle6 = 0 / degreesToRadians

        //: let du1: NSNumber = 0
        let du1: NSNumber = 0
        //: let du2: NSNumber = 0.13
        let du2: NSNumber = 0.13
        //: let du3: NSNumber = 0.3
        let du3: NSNumber = 0.3
        //: let du4: NSNumber = 0.47
        let du4: NSNumber = 0.47
        //: let du5: NSNumber = 0.8
        let du5: NSNumber = 0.8
        //: let du6: NSNumber = 1.0
        let du6: NSNumber = 1.0

        // 旋转
        //: let roate = CAKeyframeAnimation.init(keyPath: "transform.rotation")
        let roate = CAKeyframeAnimation(keyPath: (userSucceedData.replacingOccurrences(of: "observe", with: "ns") + "form" + String(notiTimeToContent.prefix(8)) + String(mainItemData)))
        //: roate.values = [(angle1), (angle2), (angle3), (angle4), (angle5), (angle6)]
        roate.values = [angle1, angle2, angle3, angle4, angle5, angle6]
        //: roate.keyTimes = [(du1), (du2), (du3), (du4), (du5), (du6)]
        roate.keyTimes = [du1, du2, du3, du4, du5, du6]

        // 缩放
        //: let zoom = CAKeyframeAnimation.init(keyPath: "transform.scale")
        let zoom = CAKeyframeAnimation(keyPath: (String(main_actualTitle) + String(noti_normalTitle)))
        //: zoom.values = [(1.0), (1.2), (1.0)]
        zoom.values = [1.0, 1.2, 1.0]
        //: zoom.keyTimes = [(0), (0.5), (1.0)]
        zoom.keyTimes = [0, 0.5, 1.0]

        //
        //: let groupAnnimation = CAAnimationGroup.init()
        let groupAnnimation = CAAnimationGroup()
        //: groupAnnimation.autoreverses = false
        groupAnnimation.autoreverses = false
        //: groupAnnimation.animations = [roate, zoom]
        groupAnnimation.animations = [roate, zoom]
        //: groupAnnimation.duration = 1.0
        groupAnnimation.duration = 1.0
        //: groupAnnimation.repeatCount = 2
        groupAnnimation.repeatCount = 2
        //: groupAnnimation.isRemovedOnCompletion = false
        groupAnnimation.isRemovedOnCompletion = false
        //: groupAnnimation.fillMode = .forwards
        groupAnnimation.fillMode = .forwards
        //: cleanBtn.layer.add(groupAnnimation, forKey: "zoom&shake")
        cleanBtn.layer.add(groupAnnimation, forKey: (String(constInfoBackgroundContent) + constCountViewName.replacingOccurrences(of: "error", with: "k")))
    }

    /// 检查系统通知是否开启
    //: private func func__turnOnSystemNotification() {
    private func lineNotification() {
        //: TalkingPermissionTool.checkPushNotification { isEnable in
        GenerateReactiveCompatible.followLikePredominantExecute { isEnable in

            //: DispatchQueue.main.async {
            DispatchQueue.main.async {
                //: if isEnable {
                if isEnable {
                    //: self.noticeView.isHidden = true
                    self.noticeView.isHidden = true
                    //: self.func__hideNotificationTipView(hide: true)
                    self.toImage(hide: true)
                    //: }else{
                } else {
                    /// 页面顶部提示
                    //: let today = NSDate.getTimeString(date: Date(), dateFormat: "yyyy-MM-dd")
                    let today = NSDate.viewFormat(date: Date(), dateFormat: (String(dataPathContent) + String(data_finishName.prefix(8))))
                    //: if let closeDateStr = Defaults.string(forKey: TalkingMessageTabCloseNotificationsKey), today == closeDateStr {
                    if let closeDateStr = app_seatPath.string(forKey: data_voiceFormat), today == closeDateStr {
                        //: self.func__hideNotificationTipView(hide: true)
                        self.toImage(hide: true)
                        //: }else{
                    } else {
                        //: self.func__hideNotificationTipView(hide: false)
                        self.toImage(hide: false)
                    }
                    /// 弹框逻辑
                    //: let isShow = Defaults.bool(forKey: TalkingMessageTabTurnOnNotificationsKey)
                    let isShow = app_seatPath.bool(forKey: appKeyName)
                    //: if !isShow {
                    if !isShow {
                        //: Defaults.set(true, forKey: TalkingMessageTabTurnOnNotificationsKey)
                        app_seatPath.set(true, forKey: appKeyName)
                        //: TalkingAlertShow.alert(title: nil,
                        ShowThen.atomicTotal85Awake(title: nil,
                                                            //: message: "Allow %@ to send you notifications?".localizedArguments(AppName),
                                                            message: String(bytes: main_labTitle.map{modelRow(age: $0)}, encoding: .utf8)!.localizedPlace(constVideoPath),
                                                            //: leftBtnTitle: "Cancel".localized,
                                                            leftBtnTitle: (String(user_photoTitle.suffix(6))).localized,
                                                            //: rightBtnTitle: "Settings".localized) {
                                                            rightBtnTitle: (String(notiTimeContent.prefix(6)) + show_nameData.replacingOccurrences(of: "equal", with: "s")).localized)
                        {
                            //: TalkingAlertShow.hideAlert()
                            ShowThen.imageLine()
                            //: return
                            //: } rightBlock: {
                        } rightBlock: {
                            //: if let settingsUrl = URL(string: UIApplication.openSettingsURLString) {
                            if let settingsUrl = URL(string: UIApplication.openSettingsURLString) {
                                //: UIApplication.shared.open(settingsUrl)
                                UIApplication.shared.open(settingsUrl)
                            }
                        }
                    }
                }
            }
        }
    }

    //: private func func__hideNotificationTipView(hide: Bool) {
    private func toImage(hide: Bool) {
        //: DispatchQueue.main.async {
        DispatchQueue.main.async {
            //: if hide{
            if hide {
                //: self.noticeView.isHidden = true
                self.noticeView.isHidden = true
                //: self.slideVC.view.snp.updateConstraints { make in
                self.slideVC.view.snp.updateConstraints { make in
                    //: make.top.equalToSuperview().offset(StatusBarHeight)
                    make.top.equalToSuperview().offset(dataSaltName)
                }
                //: self.slideVC.viewHeight = ScreenHeight - StatusBarHeight - TabBarViewHeight
                self.slideVC.viewHeight = data_senseEndMessage - dataSaltName - main_keyPath
                //: }else{
            } else {
                //: self.noticeView.isHidden = false
                self.noticeView.isHidden = false
                //: self.slideVC.view.snp.updateConstraints { make in
                self.slideVC.view.snp.updateConstraints { make in
                    //: make.top.equalToSuperview().offset(StatusBarHeight + self.noticeView.viewHeight)
                    make.top.equalToSuperview().offset(dataSaltName + self.noticeView.viewHeight)
                }
                //: self.slideVC.viewHeight = ScreenHeight - self.noticeView.bottom - TabBarViewHeight
                self.slideVC.viewHeight = data_senseEndMessage - self.noticeView.bottom - main_keyPath
            }
        }
    }
}

// MARK: - 通知

//: extension TalkingMessageViewController {
extension FindReactiveCompatible {
    /// who like me 红点通知
    //: @objc func showbadgNumberNotif(notification: NSNotification) {
    @objc func galleryNotification(notification: NSNotification) {
        //: let userinfo = notification.userInfo as![String: AnyObject]
        let userinfo = notification.userInfo as! [String: AnyObject]
        //: let badNumber: Int  = userinfo["badNumber"] as! Int
        let badNumber: Int = userinfo[(String(userWorkerValue.prefix(4)) + "umber")] as! Int
        //: badgLB.isHidden = false
        badgLB.isHidden = false
        //: if badNumber > 99 {
        if badNumber > 99 {
            //: badgLB.text = "99+"
            badgLB.text = "99+"
            //: } else if badNumber<=0 {
        } else if badNumber <= 0 {
            //: badgLB.isHidden = true
            badgLB.isHidden = true
            //: badgLB.text = "0"
            badgLB.text = "0"
            //: } else {
        } else {
            //: badgLB.text = String(badNumber)
            badgLB.text = String(badNumber)
        }
    }
}

// MARK: - Layout

//: extension TalkingMessageViewController {
extension FindReactiveCompatible {
    /// UI
    //: private func createUI() {
    private func enableUi() {
        //: view.backgroundColor = .white
        view.backgroundColor = .white

        //: view.addSubview(colorImageView)
        view.addSubview(colorImageView)
        //: view.addSubview(noticeView)
        view.addSubview(noticeView)
        //: self.addChild(slideVC)
        self.addChild(slideVC)

        //: self.view.addSubview(slideVC.view)
        self.view.addSubview(slideVC.view)
        //: slideVC.view.backgroundColor = UIColor.clear
        slideVC.view.backgroundColor = UIColor.clear
        //: slideVC.view.snp.makeConstraints { make in
        slideVC.view.snp.makeConstraints { make in
            //: make.top.equalToSuperview().offset(StatusBarHeight)
            make.top.equalToSuperview().offset(dataSaltName)
            //: make.leading.trailing.equalToSuperview()
            make.leading.trailing.equalToSuperview()
            //: make.bottom.equalToSuperview()
            make.bottom.equalToSuperview()
        }

        //: for btn in slideVC.allBtn {
        for btn in slideVC.allBtn {
            //: let curenbrn: UIButton = btn
            let curenbrn: UIButton = btn
            //: if curenbrn.titleLabel!.text == "Who like me".localized {
            if curenbrn.titleLabel!.text == (String(dataStyleText.suffix(4)) + String(userTimeValue.prefix(7))).localized {
                //: (curenbrn as AnyObject).addSubview(badgLB)
                (curenbrn as AnyObject).addSubview(badgLB)
                //: badgLB.snp.makeConstraints { make in
                badgLB.snp.makeConstraints { make in
                    //: make.leading.equalTo(curenbrn.titleLabel!.snp.trailing).offset(-5)
                    make.leading.equalTo(curenbrn.titleLabel!.snp.trailing).offset(-5)
                    //: make.top.equalTo(curenbrn).offset(7)
                    make.top.equalTo(curenbrn).offset(7)
                    //: make.height.equalTo(16)
                    make.height.equalTo(16)
                    //: make.width.greaterThanOrEqualTo(16)
                    make.width.greaterThanOrEqualTo(16)
                }
                //: badgLB.isHidden = true
                badgLB.isHidden = true
                //: } else if (curenbrn.titleLabel!.text == "Messages".localized) {
            } else if curenbrn.titleLabel!.text == (String(userMakeText.prefix(8))).localized {
                //: (curenbrn as AnyObject).addSubview(msgNumLabel)
                (curenbrn as AnyObject).addSubview(msgNumLabel)
                //: msgNumLabel.snp.makeConstraints { make in
                msgNumLabel.snp.makeConstraints { make in
                    //: make.leading.equalTo(curenbrn.titleLabel!.snp.trailing).offset(-5)
                    make.leading.equalTo(curenbrn.titleLabel!.snp.trailing).offset(-5)
                    //: make.top.equalTo(curenbrn).offset(7)
                    make.top.equalTo(curenbrn).offset(7)
                    //: make.height.equalTo(16)
                    make.height.equalTo(16)
                    //: make.width.greaterThanOrEqualTo(16)
                    make.width.greaterThanOrEqualTo(16)
                }
            }
        }

        //: view.addSubview(cleanBtn)
        view.addSubview(cleanBtn)
        //: cleanBtn.snp.makeConstraints { make in
        cleanBtn.snp.makeConstraints { make in
            //: make.top.equalTo(slideVC.view.snp.top)
            make.top.equalTo(slideVC.view.snp.top)
            //: make.trailing.equalTo(-5)
            make.trailing.equalTo(-5)
            //: make.size.equalTo(CGSize(width: 44, height: 44))
            make.size.equalTo(CGSize(width: 44, height: 44))
        }

        //: view.addSubview(netTipLabel)
        view.addSubview(netTipLabel)
        //: netTipLabel.snp.makeConstraints { make in
        netTipLabel.snp.makeConstraints { make in
            //: make.top.equalTo(slideVC.view.snp.top).offset(44)
            make.top.equalTo(slideVC.view.snp.top).offset(44)
            //: make.leading.trailing.equalToSuperview()
            make.leading.trailing.equalToSuperview()
            //: make.height.equalTo(30)
            make.height.equalTo(30)
        }
    }

    /// 绑定事件
    //: private func bindInteraction() {
    private func stageColor() {
        //: BackConversationListener.shared.rx
        BackConversationListener.shared.rx
            //: .observeWeakly(Bool.self, "isConnection")
            .observeWeakly(Bool.self, (String(showToName.suffix(6)) + String(noti_adjustTitle)))
            //: .subscribe(onNext: { [weak self] (value) in
            .subscribe(onNext: { [weak self] _ in
                //: guard let self = self else { return }
                guard let self = self else { return }
                //: self.func__checkNetTipState()
                self.towardClickState()
                //: })
            })
            //: .disposed(by: disposeBag)
            .disposed(by: disposeBag)

        //: SceneAppManager.share.rx.observeWeakly(Int.self, "networkStatus")
        SceneAppManager.share.rx.observeWeakly(Int.self, (String(show_handleData) + String(showFieldValue)))
            //: .subscribe(onNext: { [weak self]  (value) in
            .subscribe(onNext: { [weak self] _ in
                //: guard let self = self else { return }
                guard let self = self else { return }
                //: self.func__checkNetTipState()
                self.towardClickState()
                //: })
            })
            //: .disposed(by: disposeBag)
            .disposed(by: disposeBag)

        // 展示全部红点
        //: SceneAppManager.share.rx.observeWeakly(Int.self, "unreadMessageNum")
        SceneAppManager.share.rx.observeWeakly(Int.self, (show_videoValue.replacingOccurrences(of: "model", with: "n") + "dMessa" + String(constNameTitle)))
            //: .subscribe(onNext: { [weak self] (value) in
            .subscribe(onNext: { [weak self] value in
                //: guard let self = self else { return }
                guard let self = self else { return }
                //: let valueInt = value ?? 0
                let valueInt = value ?? 0
                //: self.func__messagebadgLBState(num: valueInt)
                self.indicatorNum(num: valueInt)
                //: })
            })
            //: .disposed(by: disposeBag)
            .disposed(by: disposeBag)

        //: cleanBtn.rx.controlEvent(.touchUpInside)
        cleanBtn.rx.controlEvent(.touchUpInside)
            //: .subscribe(onNext: {
            .subscribe(onNext: {
                //: let config = ShowAlertConfig()
                let config = NumerateAlertConfig()
                //: config.alignment = .center
                config.alignment = .center

                //: TalkingAlertShow.customAlert(message: "Do you want to mark all messages as read?".localized, leftBtnTitle: "Cancel".localized, rightBtnTitle: "OK".localized, leftBlock: {
                ShowThen.executeFor(message: String(bytes: data_rejectValue.map{kindRenderFalse(send: $0)}, encoding: .utf8)!.localized, leftBtnTitle: (String(user_photoTitle.suffix(6))).localized, rightBtnTitle: "OK".localized, leftBlock: {
                    //: TalkingAlertShow.hideAlert()
                    ShowThen.imageLine()

                    //: }, rightBlock: {
                }, rightBlock: {
                    //: V2TIMManager.sharedInstance().markAllMessage {
                    V2TIMManager.sharedInstance().markAllMessage {
                        //: UserDefaults.standard.set(true, forKey: isShowCleanAnimatCacheKey)
                        UserDefaults.standard.set(true, forKey: constStreamFormat)
                        //: } fail: { code, desc in
                    } fail: { code, desc in
                        //: UploadLogTool.writeLog(msg: "消息列表一键已读失败：code:\(code), desc:\(String(describing: desc))")
                        self.writeData(code, desc: desc)
                    }
                    //: }, config: config)
                }, config: config)

                //: })
            })
            //: .disposed(by: disposeBag)
            .disposed(by: disposeBag)

        // who like me 红点通知
        //: NotificationCenter.default.addObserver(self,
        NotificationCenter.default.addObserver(self,
                                               //: selector: #selector(showbadgNumberNotif(notification:)),
                                               selector: #selector(galleryNotification(notification:)),
                                               //: name: WHOLIKEME_BADGENUMBER_NOTIF,
                                               name: userBottomViewStr,
                                               //: object: nil)
                                               object: nil)

        //: noticeView.closeBtnBlock = { [weak self] ()  -> Void in
        noticeView.closeBtnBlock = { [weak self] () in
            //: guard let self = self else {return}
            guard let self = self else { return }
            //: let today = NSDate.getTimeString(date: Date(), dateFormat: "yyyy-MM-dd")
            let today = NSDate.viewFormat(date: Date(), dateFormat: (String(dataPathContent) + String(data_finishName.prefix(8))))
            //: Defaults.set(today, forKey: TalkingMessageTabCloseNotificationsKey)
            app_seatPath.set(today, forKey: data_voiceFormat)
            //: self.func__hideNotificationTipView(hide: true)
            self.toImage(hide: true)
        }

        //: NotificationCenter.default.rx.notification( UIApplication.willEnterForegroundNotification)
        NotificationCenter.default.rx.notification(UIApplication.willEnterForegroundNotification)
            //: .subscribe(onNext: { [weak self] (notification) in
            .subscribe(onNext: { [weak self] _ in
                //: guard let self = self else { return }
                guard let self = self else { return }
                //: self.func__turnOnSystemNotification()
                self.lineNotification()
                //: }).disposed(by: disposeBag)
            }).disposed(by: disposeBag)
    }
    
    func writeData(_ code: Int32, desc: String?) {
        NurseLogReactiveCompatible.citeOrLineup(msg: (mainCameraNameText + String(data_sizeFrameContent.prefix(7))) + "\(code)" + (show_blockValue.capitalized + String(user_makeText)) + "\(String(describing: desc))")
    }
}
